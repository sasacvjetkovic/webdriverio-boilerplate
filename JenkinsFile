pipeline {
    agent any 
    stages {
        stage('Stage 1') {
            steps {
                echo 'Hello world!'
            }
        }
        stage('Stage 2') {
            steps {
                sh 'apt-get update'
                sh 'apt-get -y upgrade'
                sh 'apt-get dist-upgrade'
                sh 'apt-get -y install build-essential'
                sh 'apt-get install sudo'
                sh 'curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -'
                sh 'sudo apt-get install -y nodejs'
                sh 'apt-get install npm'
                sh 'npm -v'
                sh 'npm install'
                sh 'npm audit fix'
                sh 'sudo apt remove cmdtest
                sudo apt remove yarn
                curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
                echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
                sudo apt-get update
                sudo apt-get install yarn -y'
                sh 'yarn --version'
                sh 'yarn install'
                sh 'ls'
            }
        }
    }
}